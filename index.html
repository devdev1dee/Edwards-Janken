<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edward's Scissorhands Janken</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Special+Elite&family=UnifrakturMaguntia&display=swap');

        body { 
            background: #0d0d0d; 
            color: #d1d1d1; 
            text-align: center; 
            font-family: 'Special+Elite', serif;
            background-image: radial-gradient(circle, #222 1%, #000 100%);
            margin: 0; padding: 20px;
        }

        h1 { font-family: 'UnifrakturMaguntia', cursive; font-size: 2.5rem; color: #fff; margin-bottom: 5px; }

        #game-container { max-width: 600px; margin: auto; border: 2px solid #444; padding: 20px; background: rgba(0,0,0,0.8); }

        /* HEALTH BAR STYLES */
        .health-section { margin-bottom: 20px; }
        .label { font-size: 0.8rem; letter-spacing: 2px; margin-bottom: 5px; color: #888; }
        #health-bar-container { width: 100%; height: 20px; border: 1px solid #555; background: #111; position: relative; }
        #health-fill { 
            width: 100%; height: 100%; background: linear-gradient(to right, #600, #f00); 
            transition: width 0.5s ease-in-out; box-shadow: 0 0 10px #f00;
        }

        #screen { 
            width: 100%; height: 350px; border: 1px solid #333; background: #000; 
            display: flex; align-items: center; justify-content: center; margin-bottom: 20px;
        }

        img { max-width: 100%; max-height: 100%; filter: grayscale(30%); }

        .controls { display: flex; justify-content: center; gap: 15px; }

        button { 
            padding: 12px 24px; cursor: pointer; background: #1a1a1a; color: #bbb; 
            border: 1px solid #444; font-family: 'Special+Elite', serif; transition: 0.3s;
        }

        button:hover { background: #fff; color: #000; box-shadow: 0 0 10px #fff; }

        #message { font-style: italic; font-size: 1.1rem; height: 1.5em; color: #aaa; margin: 15px 0; }
    </style>
</head>
<body>

    <div id="game-container">
        <h1>Edward's Fate</h1>

        <div class="health-section">
            <div class="label">EDWARD'S SPIRIT</div>
            <div id="health-bar-container">
                <div id="health-fill"></div>
            </div>
        </div>

        <div id="screen">
            <img id="game-frame" src="edward_idle.png">
        </div>

        <div id="message">Will you play with him?</div>
        
        <div class="controls" id="rps-controls">
            <button onclick="playJanken('rock')">ROCK</button>
            <button onclick="playJanken('paper')">PAPER</button>
            <button onclick="playJanken('scissors')">SCISSORS</button>
        </div>

        <div class="controls" id="dir-controls" style="display:none;">
            <button onclick="playDirection('up')">UP</button>
            <button onclick="playDirection('down')">DOWN</button>
            <button onclick="playDirection('left')">LEFT</button>
            <button onclick="playDirection('right')">RIGHT</button>
        </div>
    </div>

    <script>
        let health = 100;
        const frame = document.getElementById('game-frame');
        const msg = document.getElementById('message');
        const rps = document.getElementById('rps-controls');
        const dirs = document.getElementById('dir-controls');
        const healthFill = document.getElementById('health-fill');

        function playJanken(playerChoice) {
            const edwardChoice = 'scissors';
            if (playerChoice === 'rock') {
                frame.src = 'edward_surprised.png';
                msg.innerText = "You beat his scissors! Now point!";
                setTimeout(showDirections, 800);
            } else if (playerChoice === 'paper') {
                frame.src = 'edward_win_throw.png';
                msg.innerText = "He cut your paper. Edward is safe.";
                setTimeout(resetRound, 2000);
            } else {
                frame.src = 'edward_tie.png';
                msg.innerText = "A scissor tie. Try again.";
            }
        }

        function showDirections() {
            rps.style.display = 'none';
            dirs.style.display = 'flex';
        }

        function playDirection(playerDir) {
            const choices = ['up', 'down', 'left', 'right'];
            const edwardLook = choices[Math.floor(Math.random() * 4)];
            frame.src = 'edward_looks_' + edwardLook + '.png';
            
            if (playerDir === edwardLook) {
                // SUCCESS! Edward loses health
                health -= 25;
                healthFill.style.width = health + "%";
                msg.innerText = "DIRECT HIT!";
                
                if (health <= 0) {
                    setTimeout(() => {
                        frame.src = 'victory_screen.png';
                        msg.innerText = "Edward has been defeated.";
                        dirs.style.display = 'none';
                    }, 500);
                    return;
                }
            } else {
                msg.innerText = "He looked " + edwardLook + ". You missed!";
            }
            
            setTimeout(resetRound, 2000);
        }

        function resetRound() {
            if (health > 0) {
                frame.src = 'edward_idle.png';
                msg.innerText = "Edward waits...";
                rps.style.display = 'flex';
                dirs.style.display = 'none';
            }
        }
    </script>
</body>
</html>
