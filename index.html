<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Edward Janken</title>
    <style>
        /* Retro Pixel Font */
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

        body { 
            background: #111; 
            color: #00ff41; /* Matrix/Retro Green */
            text-align: center; 
            font-family: 'DotGothic16', sans-serif;
            image-rendering: pixelated; /* Makes your art look like pixels */
            margin: 0; padding: 20px;
        }

        #game-container { 
            max-width: 500px; 
            margin: auto; 
            border: 4px solid #444; 
            background: #000; 
            padding: 15px;
            box-shadow: 10px 10px 0px #222;
        }

        /* PIXEL HEALTH BAR */
        .health-section { margin-bottom: 20px; padding: 10px; border: 2px solid #333; }
        #health-bar-container { 
            width: 100%; 
            height: 30px; 
            background: #222; 
            border: 3px solid #fff;
            position: relative;
        }
        #health-fill { 
            width: 100%; 
            height: 100%; 
            background: #ff0000; 
            transition: width 0.3s steps(5); /* Steps makes it look "choppy/retro" */
        }

        #screen { 
            width: 100%; 
            height: 300px; 
            background: #050505; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-bottom: 4px solid #444;
            margin-bottom: 20px;
        }

        img { 
            max-width: 100%; 
            max-height: 100%; 
            /* This forces the browser to not blur your drawings */
            image-rendering: -moz-crisp-edges;
            image-rendering: pixelated;
        }

        .controls { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }

        button { 
            padding: 10px 15px; 
            cursor: pointer; 
            background: #000; 
            color: #fff; 
            border: 3px solid #fff; 
            font-family: 'DotGothic16', sans-serif;
            text-transform: uppercase;
        }

        button:hover { background: #fff; color: #000; }

        #message { height: 2em; margin: 15px 0; font-size: 1.2rem; color: #fff; }
    </style>
</head>
<body>

    <div id="game-container">
        <h1 style="font-size: 1.5rem;">EDWARD_SCISSORS.EXE</h1>

        <div class="health-section">
            <div id="health-bar-container">
                <div id="health-fill"></div>
            </div>
            <div style="margin-top:5px;">EDWARD_HP</div>
        </div>

        <div id="screen">
            <img id="game-frame" src="edward_idle.png">
        </div>

        <div id="message">CHOOSE YOUR MOVE</div>
        
        <div class="controls" id="rps-controls">
            <button onclick="playJanken('rock')">ROCK</button>
            <button onclick="playJanken('paper')">PAPER</button>
            <button onclick="playJanken('scissors')">SCISSORS</button>
        </div>

        <div class="controls" id="dir-controls" style="display:none;">
            <button onclick="playDirection('up')">UP</button>
            <button onclick="playDirection('down')">DOWN</button>
            <button onclick="playDirection('left')">LEFT</button>
            <button onclick="playDirection('right')">RIGHT</button>
        </div>
    </div>

    <script>
        let health = 100;
        const frame = document.getElementById('game-frame');
        const msg = document.getElementById('message');
        const rps = document.getElementById('rps-controls');
        const dirs = document.getElementById('dir-controls');
        const healthFill = document.getElementById('health-fill');

        function playJanken(playerChoice) {
            // Edward is always scissors
            if (playerChoice === 'rock') {
                frame.src = 'edward_surprised.png';
                msg.innerText = "WIN! POINT A DIRECTION!";
                setTimeout(showDirections, 600);
            } else if (playerChoice === 'paper') {
                frame.src = 'edward_win_throw.png';
                msg.innerText = "LOSE! HE CUT THE PAPER!";
                setTimeout(resetRound, 1500);
            } else {
                frame.src = 'edward_tie.png';
                msg.innerText = "TIE! TRY AGAIN!";
            }
        }

        function showDirections() {
            rps.style.display = 'none';
            dirs.style.display = 'flex';
        }

        function playDirection(playerDir) {
            const choices = ['up', 'down', 'left', 'right'];
            const edwardLook = choices[Math.floor(Math.random() * 4)];
            
            frame.src = 'edward_looks_' + edwardLook + '.png';
            
            if (playerDir === edwardLook) {
                // THE HIT: Health goes down here
                health = health - 25; 
                healthFill.style.width = health + "%"; // Update the bar visually
                msg.innerText = "CRITICAL HIT!";
                
                if (health <= 0) {
                    setTimeout(() => {
                        frame.src = 'victory_screen.png';
                        msg.innerText = "EDWARD DEFEATED!";
                        dirs.style.display = 'none';
                    }, 500);
                    return;
                }
            } else {
                msg.innerText = "MISS! HE LOOKED " + edwardLook.toUpperCase();
            }
            
            setTimeout(resetRound, 1500);
        }

        function resetRound() {
            if (health > 0) {
                frame.src = 'edward_idle.png';
                msg.innerText = "CHOOSE YOUR MOVE";
                rps.style.display = 'flex';
                dirs.style.display = 'none';
            }
        }
    </script>
</body>
</html>
